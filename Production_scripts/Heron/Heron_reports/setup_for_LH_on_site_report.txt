In a suitable working directory run these mongodb exports:

mongoexport --uri="mongodb://lighthouse_owner:ma4ver88ftop@vm-mg-psd-prod1.internal.sanger.ac.uk,vm-mg-psd-prod2.internal.sanger.ac.uk/lighthouseProdDB?replicaSet=psd_lims_rs" \
  --collection=ditinctNegPlateBarcode3 \
  --out=raw_neg_plate_barcodes_130720.csv \
  --type=csv \
  --fields source,plate_barcode,"Date Tested"
  
mongoexport --uri="mongodb://lighthouse_owner:ma4ver88ftop@vm-mg-psd-prod1.internal.sanger.ac.uk,vm-mg-psd-prod2.internal.sanger.ac.uk/lighthouseProdDB?replicaSet=psd_lims_rs" \
 --collection=samples \
 --out=pos_samples_130720.csv \
 --type=csv \
 --fields "source,plate_barcode,Root Sample ID,Result,Date Tested" \
 --query '{"Result":{ "$regularExpression": { "pattern": "^positive", "options": "i" }}}'
 
Remove duplicates from file # TODO work out how to run export returning only distinct data
 sort -u raw_neg_plate_barcodes_130720.csv -o neg_plate_barcodes_130720.csv 
Move the files so they can be accessed by the report 
 scp <filename> sss0-prod.psd.sanger.ac.uk:/var/tmp/Heron_tmp/Files/


use LH_on_site_report.rb https://github.com/sanger/usg_scripts/blob/master/Production_scripts/Heron/Heron_reports/LH_on_site_report.rb